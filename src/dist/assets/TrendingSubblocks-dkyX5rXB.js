import{_ as h,E as f,u as b,l,o as w,g as C,c as e,b as o,d as s,e as u,w as p,f as m,t as i,F as x,i as A,m as B}from"./index-CQU0DmQk.js";const L={class:"trending-card"},T={key:0,class:"auth-required-container"},E={key:1,class:"loading-container"},N={key:2,class:"error-container"},V={key:3},F={class:"trending-list"},P=["src","alt"],q={key:1},z={class:"subblock-info"},D={class:"subblock-name"},I={class:"subscriber-count"},M={class:"view-all"},U={key:4,class:"no-data-container"},$={__name:"TrendingSubblocks",setup(j){const a=f(),y=b(),_=l(()=>a.popularSpaces.slice(0,5)),S=l(()=>a.loading.popularSpaces),v=l(()=>a.errors.popularSpaces),c=l(()=>y.isAuthenticated);w(async()=>{if(c.value)try{await a.loadPopularSpaces()}catch(r){console.error("加载流行空间失败:",r)}});const k=async()=>{if(c.value)try{await a.loadPopularSpaces(!0)}catch(r){console.error("重试加载流行空间失败:",r)}};return(r,t)=>{const d=C("router-link");return o(),e("div",L,[t[5]||(t[5]=s("h3",{class:"trending-title"},"热门社区",-1)),c.value?S.value?(o(),e("div",E,t[2]||(t[2]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"加载中...",-1)]))):v.value?(o(),e("div",N,[s("p",null,i(v.value),1),s("button",{onClick:k,class:"retry-btn"}," 重试 ")])):_.value.length>0?(o(),e("div",V,[s("ul",F,[(o(!0),e(x,null,A(_.value,n=>(o(),e("li",{key:n.id,class:"trending-item"},[u(d,{to:`/r/${n.id}`,class:"trending-link"},{default:p(()=>{var g;return[s("div",{class:"subblock-icon",style:B({backgroundColor:n.color||"#6B7280"})},[n.avatar?(o(),e("img",{key:0,src:n.avatar,alt:n.name},null,8,P)):(o(),e("span",q,i(n.name.charAt(0).toUpperCase()),1))],4),s("div",z,[s("div",D,"r/"+i(n.name),1),s("div",I,i(((g=n.memberCount)==null?void 0:g.toLocaleString())||0)+" 成员",1)])]}),_:2},1032,["to"])]))),128))]),s("div",M,[u(d,{to:"/subblocks",class:"view-all-link"},{default:p(()=>t[3]||(t[3]=[m(" 查看所有社区 ")])),_:1})])])):(o(),e("div",U,t[4]||(t[4]=[s("p",null,"暂无热门社区",-1)]))):(o(),e("div",T,[t[1]||(t[1]=s("p",null,"请登录查看热门社区",-1)),u(d,{to:"/login",class:"login-btn"},{default:p(()=>t[0]||(t[0]=[m(" 登录 ")])),_:1})]))])}}},H=h($,[["__scopeId","data-v-352c3a73"]]);export{H as T};
