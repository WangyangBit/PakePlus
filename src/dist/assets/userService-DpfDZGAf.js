import{k as o}from"./index-CQU0DmQk.js";const i={async getUserDetail(r=null){try{const e=r?`/user/detail?userId=${r}`:"/user/detail";return await o.get(e)}catch(e){throw console.error("获取用户详细信息失败:",e),e}},async getUsersByIds(r){try{if(!r||r.length===0)return{success:!0,data:[]};const e=r.map(a=>`userId=${a}`).join("&");return await o.get(`/user/search?${e}`)}catch(e){throw console.error("批量获取用户信息失败:",e),e}},async getUserAvatars(r){try{if(!r||r.length===0)return{success:!0,data:[]};const e=r.map(a=>`userId=${a}`).join("&");return await o.get(`/user/avatars?${e}`)}catch(e){throw console.error("批量获取用户头像失败:",e),e}},async updateNickname(r){try{return await o.post("/user/nickname",{nickname:r})}catch(e){throw console.error("修改昵称失败:",e),e}},async updateIntroduction(r){try{return await o.post("/user/introduction",{introduction:r})}catch(e){throw console.error("修改个人简介失败:",e),e}},async updateAvatar(r){try{const e=new FormData;return e.append("avatar",r),await o.upload("/user/avatar",e)}catch(e){throw console.error("修改头像失败:",e),e}},async updateEmailVisibility(r){try{return await o.post("/user/email/show",{show:r})}catch(e){throw console.error("修改邮箱显示状态失败:",e),e}},async requestEmailChange(r){try{return await o.post("/user/email",{email:r})}catch(e){throw console.error("请求修改邮箱失败:",e),e}},async verifyEmailChange(r,e){try{return await o.post("/user/email/verify",{email:r,authCode:e})}catch(t){throw console.error("验证邮箱修改失败:",t),t}},async uploadMedia(r){try{const e=new FormData;return e.append("file",r),await o.upload("/user/upload",e)}catch(e){throw console.error("上传媒体文件失败:",e),e}},async searchUsers(r,e=0,t=20){try{return await o.get(`/search/user?query=${encodeURIComponent(r)}&page=${e}&size=${t}`)}catch(a){throw console.error("搜索用户失败:",a),a}},async getUserPosts(r=null,e=0,t=20,a="DESC"){try{let s=`/post/user?page=${e}&size=${t}`;return r&&(s+=`&userId=${r}`),await o.get(s)}catch(s){throw console.error("获取用户帖子失败:",s),s}},async getUserComments(r=null,e=0,t=20,a="DESC"){try{let s=`/comment/user?page=${e}&size=${t}`;return r&&(s+=`&userId=${r}`),await o.get(s)}catch(s){throw console.error("获取用户评论失败:",s),s}},async getUserOpinions(r=null,e=0,t=20,a="NIL"){try{let s=`/post/user/opinion?page=${e}&size=${t}&opinion=${a}`;return r&&(s+=`&userid=${r}`),await o.get(s)}catch(s){throw console.error("获取用户投票记录失败:",s),s}},validateUsername(r){return!r||typeof r!="string"?{valid:!1,message:"用户名不能为空"}:r.length<3?{valid:!1,message:"用户名至少需要3个字符"}:r.length>20?{valid:!1,message:"用户名不能超过20个字符"}:/^[a-zA-Z0-9_]+$/.test(r)?{valid:!0}:{valid:!1,message:"用户名只能包含字母、数字和下划线"}},validateEmail(r){return!r||typeof r!="string"?{valid:!1,message:"邮箱地址不能为空"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?{valid:!0}:{valid:!1,message:"邮箱地址格式不正确"}},formatDisplayName(r){return r?r.nickname||r.username||"用户":"未知用户"}};export{i as u};
